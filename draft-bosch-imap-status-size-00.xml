<?xml version="1.0" encoding="US-ASCII"?>

<!DOCTYPE rfc SYSTEM "rfc2629.dtd">

<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<?rfc strict="yes" ?>
<?rfc toc="yes"?>
<?rfc tocdepth="4"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes" ?>
<?rfc compact="yes" ?>
<?rfc subcompact="no" ?>

<rfc category="std" docName="draft-bosch-imap-status-size-00" ipr="trust200902">
<!-- ***** FRONT MATTER ***** -->

<front>
<title abbrev="IMAP - STATUS=SIZE Extension">
Internet Message Access Protocol (IMAP) - STATUS=SIZE Extension
</title>

<author fullname="Stephan Bosch" initials="S." surname="Bosch">
  <organization/>
  <address>
    <postal>
      <street></street>
      <city>Enschede</city>
      <country>NL</country>
    </postal>
    <email>stephan@rename-it.nl</email>
  </address>
</author>

<date/>

<area>General</area>
<!--<workgroup>APPSAWG</workgroup>-->
<keyword>imap</keyword>
<keyword>status</keyword>
<keyword>size</keyword>

<abstract>
<t> [FIXME]
</t>
</abstract>
</front>

<middle>

<section title="Introduction">
<t>This document extends Internet Message Access Protocol
(IMAP) <xref target="IMAP4rev1"/> with a new capability called "STATUS=SIZE".
Currently, an IMAP client needs to retrieve all message sizes individually
using the FETCH command to determine the total size of a mailbox. The
"STATUS=SIZE" capability provides a more efficient means to achieve this.
It extends the STATUS command with a new SIZE data item, which indicates the
total size of all messages in the target mailbox. This way, this information can
be queried with just one STATUS command. When LIST-STATUS IMAP capability
<xref target="LIST-STATUS"/> is also available, the SIZE data item can be
queried for many mailboxes at once using just one LIST command.</t>

<t>[FIXME: some application examples]</t>
</section>

<section title="Conventions Used in This Document">
<t>In examples, "C:" indicates lines sent by a client that is connected
to a server.  "S:" indicates lines sent by the server to the client.
</t>
<t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in <xref target="KEYWORDS"/>.
</t>
</section>

<section title="STATUS Command and Response Extensions">

<t>This extension defines one new status data item for the STATUS command and
response:
<list style="hanging">
  <t hangText="SIZE"><vspace blankLines="0"/>
  The total size of the mailbox in octets. This MUST be equal to the sum of the
  sizes of all messages in the mailbox. 
	</t>
</list>
</t>

<t>Example:</t>
<?rfc needLines="1" ?>
<figure><artwork><![CDATA[
C: A01 STATUS frop (MESSAGES SIZE UIDNEXT)
S: * STATUS frop (MESSAGES 30 SIZE 44421 UIDNEXT 242344)
S: A01 OK STATUS completed
]]></artwork></figure>

<t>When the LIST-STATUS IMAP capability <xref target="LIST-STATUS"/> is
also available, the STATUS command can be combined with the LIST command to
further improve efficiency. This way, the sizes of many mailboxes can be
queried with just one LIST command.</t>

<t>Example:</t>
<?rfc needLines="1" ?>
<figure><artwork><![CDATA[
C: A02 LIST "" % RETURN (STATUS (MESSAGES SIZE))
S: * LIST () "."  "INBOX"
S: * STATUS "INBOX" (MESSAGES 17 SIZE 16234)
S: * LIST () "." "frop"
S: * STATUS "frop" (MESSAGES 30 SIZE 44421)
S: A02 OK List completed.
]]></artwork></figure>

</section>

<section anchor="Syntax" title="Formal Syntax">
<t>The following syntax specification augments the grammar specified in
<xref target="IMAP4rev1"/>. It uses the Augmented Backus-Naur Form (ABNF)
notation as specified in <xref target="ABNF"/>. Elements not defined here are
taken from <xref target="IMAP4rev1"/>.</t>

<?rfc needLines="8" ?>
<figure><artwork type="ABNF"><![CDATA[
status-att /= "SIZE"
]]></artwork></figure>

</section>

<section anchor="Security" title="Security Considerations">
<t>There are no known additional security issues with this extension
beyond those described in the base protocol described in
<xref target="IMAP4rev1"/>.</t>
</section>

<section anchor="IANA" title="IANA Considerations">
<t>The IANA is requested to add "STATUS=SIZE" to the "IMAP Capabilities"
registry located at
&lt;http://www.iana.org/assignments/imap-capabilities&gt;.</t>
</section>

<section title="Acknowledgements">
<t>Reviews are appreciated.</t>
</section>
</middle>

<!--  *****BACK MATTER ***** -->

<back>
<!-- References split into informative and normative -->

<references title="Normative References">
  <reference anchor='KEYWORDS'>
    <front>
    <title abbrev='RFC Key Words'>Key words for use in RFCs to Indicate Requirement Levels</title>
    <author initials='S.' surname='Bradner' fullname='Scott Bradner'>
    <organization>Harvard University</organization>
    <address>
      <postal>
        <street>1350 Mass. Ave.</street>
        <street>Cambridge</street>
        <street>MA 02138</street>
      </postal>
      <phone>- +1 617 495 3864</phone>
      <email>sob@harvard.edu</email>
    </address>
    </author>
    <date year='1997' month='March' />
    <area>General</area>
    <keyword>keyword</keyword>
		</front>

    <seriesInfo name='BCP' value='14' />
    <seriesInfo name='RFC' value='2119' />
    <format type='TXT' octets='4723' target='http://www.rfc-editor.org/rfc/rfc2119.txt' />
    <format type='HTML' octets='17491' target='http://xml.resource.org/public/rfc/html/rfc2119.html' />
    <format type='XML' octets='5777' target='http://xml.resource.org/public/rfc/xml/rfc2119.xml' />
  </reference>

	<reference anchor='ABNF'>
		<front>
		<title>Augmented BNF for Syntax Specifications: ABNF</title>
		<author initials='D.' surname='Crocker' fullname='D. Crocker'>
			<organization />
		</author>
		<author initials='P.' surname='Overell' fullname='P. Overell'>
			<organization />
		</author>
		<date year='2008' month='January' />
		</front>
		<seriesInfo name='STD' value='68' />
		<seriesInfo name='RFC' value='5234' />
		<format type='TXT' octets='26359' target='http://www.rfc-editor.org/rfc/rfc5234.txt' />
	</reference>

	<reference anchor='IMAP4rev1'>
		<front>
		<title>INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1</title>
		<author initials='M.' surname='Crispin' fullname='M. Crispin'>
		<organization /></author>
		<date year='2003' month='March' />
		</front>
		<seriesInfo name='RFC' value='3501' />
		<format type='TXT' octets='227640' target='http://www.rfc-editor.org/rfc/rfc3501.txt' />
	</reference>

	<reference anchor='LIST-STATUS'>
		<front>
		<title>IMAP4 Extension for Returning STATUS Information in Extended LIST</title>
		<author initials='A.' surname='Melnikov' fullname='A. Melnikov'>
		<organization /></author>
		<author initials='T.' surname='Sirainen' fullname='T. Sirainen'>
		<organization /></author>
		<date year='2010' month='March' />
		</front>
		<seriesInfo name='RFC' value='5819' />
		<format type='TXT' octets='10584' target='http://www.rfc-editor.org/rfc/rfc5819.txt' />
	</reference>
</references>

<!--<references title="Informative References">
</references>-->
</back>

</rfc>
